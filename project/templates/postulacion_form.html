<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Postulación</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            color: #343a40;
        }

        h1 {
            color: #9A616D;
            margin-bottom: 20px;
        }

        .form-label {
            font-weight: bold;
        }

        .btn-primary {
            background-color: #9A616D;
            border-color: #9A616D;
        }

        .btn-primary:hover {
            background-color: #7d4e58;
            border-color: #7d4e58;
        }

        .btn-danger {
            background-color: #dc3545;
        }

        .card {
            border-color: #9A616D;
        }

        .card-header {
            background-color: #9A616D;
            color: #ffffff;
        }

        #noResults {
            font-size: 1.2em;
            margin-top: 20px;
        }
        .is-invalid {
            border-color: #dc3545; /* Color rojo para campos vacíos */
        }
    </style>
</head>

<body>
    {% include 'menu_postulante.html' %}
    <div class="container py-5">
        <div class="card">
            <div class="card-header text-center">
                <h1>Formulario de Postulación</h1>
            </div>
            <div class="card-body">
                <form action="{{ url_for('generar_pdf') }}" method="POST">
                    <!-- Barra de búsqueda -->
                    <!-- Campos del formulario -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="nombre" class="form-label">Nombre</label>
                            <input type="text" id="nombre" name="nombre" class="form-control" required>
                        </div>
                        <div class="col-md-6">
                            <label for="telefono" class="form-label">Teléfono</label>
                            <input type="tel" class="form-control" id="telefono" name="telefono" maxlength="10" pattern="\d{10}" required>
                        </div>
                    </div>
    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="cedula" class="form-label">Cédula</label>
                            <input type="text" id="cedula" name="cedula" class="form-control" maxlength="10" pattern="\d{10}" required>
                        </div>
                        <div class="col-md-6">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" id="email" name="email" class="form-control" required>
                        </div>
                    </div>
    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="direccion" class="form-label">Dirección</label>
                            <input type="text" id="direccion" name="direccion" class="form-control" required>
                        </div>
                        <div class="col-md-6">
                            <label for="edad" class="form-label">Edad:</label>
                            <input type="number" class="form-control" id="edad" name="edad" min="18" max="70" required>
                        </div>
                    </div>
    
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="cargoPostular" class="form-label">Cargo a Postular</label>
                            <input type="text" class="form-control" id="cargoPostular" name="cargoPostular" required>
                        </div>
                        <div class="col-md-6">
                            <label for="descripcion" class="form-label">Descripción:</label>
                            <textarea class="form-control" id="descripcion" name="descripcion" rows="3" placeholder="Breve carta de presentación"></textarea>
                        </div>
                    </div>
    
                   
    
                    <!-- Habilidades -->
                    <div class="d-flex align-items-start justify-content-between mb-4">
                        <!-- Habilidades -->
                        <div id="habilidadesContainer" class="d-flex justify-content-between w-100">
                            <!-- Columna izquierda -->
                            <div class="me-3 w-50">
                                <label class="form-label"><h5>Habilidades (Columna Izquierda)</h5></label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="comunicacionEfectiva" name="habilidades[]" value="Comunicación efectiva">
                                    <label class="form-check-label" for="comunicacionEfectiva">Comunicación efectiva</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="escuchaActiva" name="habilidades[]" value="Escucha activa">
                                    <label class="form-check-label" for="escuchaActiva">Escucha activa</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="redaccionProfesional" name="habilidades[]" value="Redacción profesional">
                                    <label class="form-check-label" for="redaccionProfesional">Redacción profesional</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="trabajoEquipo" name="habilidades[]" value="Trabajo en equipo">
                                    <label class="form-check-label" for="trabajoEquipo">Trabajo en equipo</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="resolucionConflictos" name="habilidades[]" value="Resolución de conflictos">
                                    <label class="form-check-label" for="resolucionConflictos">Resolución de conflictos</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="empatia" name="habilidades[]" value="Empatía">
                                    <label class="form-check-label" for="empatia">Empatía</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="gestionTiempo" name="habilidades[]" value="Gestión del tiempo">
                                    <label class="form-check-label" for="gestionTiempo">Gestión del tiempo</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="planificacionOrganizacion" name="habilidades[]" value="Planificación y organización">
                                    <label class="form-check-label" for="planificacionOrganizacion">Planificación y organización</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="manejoProyectos" name="habilidades[]" value="Manejo de proyectos">
                                    <label class="form-check-label" for="manejoProyectos">Manejo de proyectos</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="pensamientoCritico" name="habilidades[]" value="Pensamiento crítico">
                                    <label class="form-check-label" for="pensamientoCritico">Pensamiento crítico</label>
                                </div>
                            </div>
                        
                            <!-- Columna derecha -->
                            <div class="w-50">
                                <label class="form-label"><h5>Habilidades</h5></label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="adaptabilidad" name="habilidades[]" value="Adaptabilidad">
                                    <label class="form-check-label" for="adaptabilidad">Adaptabilidad</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="creatividad" name="habilidades[]" value="Creatividad">
                                    <label class="form-check-label" for="creatividad">Creatividad</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="manejoHerramientas" name="habilidades[]" value="Manejo de herramientas digitales">
                                    <label class="form-check-label" for="manejoHerramientas">Manejo de herramientas digitales</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="aprendizajeRapido" name="habilidades[]" value="Aprendizaje rápido">
                                    <label class="form-check-label" for="aprendizajeRapido">Aprendizaje rápido</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="analisisDatos" name="habilidades[]" value="Análisis de datos">
                                    <label class="form-check-label" for="analisisDatos">Análisis de datos</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="tomaDecisiones" name="habilidades[]" value="Toma de decisiones">
                                    <label class="form-check-label" for="tomaDecisiones">Toma de decisiones</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="motivacionEquipos" name="habilidades[]" value="Motivación de equipos">
                                    <label class="form-check-label" for="motivacionEquipos">Motivación de equipos</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="negociacion" name="habilidades[]" value="Negociación">
                                    <label class="form-check-label" for="negociacion">Negociación</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="eticaLaboral" name="habilidades[]" value="Ética laboral">
                                    <label class="form-check-label" for="eticaLaboral">Ética laboral</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="atencionDetalle" name="habilidades[]" value="Atención al detalle">
                                    <label class="form-check-label" for="atencionDetalle">Atención al detalle</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    
                        <!-- Conocimientos -->
                        <h5>Conocimiento</h5>
                        <div class="row mb-3">
                            <div class="col-md-6">
                            <label for="conocimientos" class="form-label"></label>
                            <div class="input-group mb-3">
                                <input type="text" class="form-control" name="conocimientos[]" placeholder="Ingrese un conocimiento">
                                <button type="button" class="btn btn-danger btn-remove-conocimiento">Eliminar</button>
                            </div>
                            <button type="button" id="addConocimiento" class="btn btn-primary mt-2">Agregar Conocimiento</button>
                        </div>
                    </div>

                    <h5>Educación</h5>
                    <div class="row mb-3">
                        <!-- Nivel de estudio -->
                        <div class="col-md-6">
                            <label for="nivelEstudio" class="form-label">Nivel de estudio:</label>
                            <select class="form-control" id="nivelEstudio" name="nivelEstudio">
                                <option value="Profesional universitario">Profesional universitario</option>
                                <option value="Masterado">Masterado</option>
                            </select>
                        </div>
                    
                        <!-- Estado de estudio -->
                        <div class="col-md-6">
                            <label for="estadoEstudio" class="form-label">Estado de estudio:</label>
                            <select class="form-control" id="estadoEstudio" name="estadoEstudio">
                                <option value="En curso">En curso</option>
                                <option value="Egresado">Egresado</option>
                                <option value="Culminado">Culminado</option>
                            </select>
                        </div>
                    </div>
                    
        
                  <div class="mb-3">
                    <label for="nombreInstitucion" class="form-label">Nombre de la institución:</label>
                    <input type="text" class="form-control" id="nombreInstitucion" name="nombreInstitucion">
                  </div>
    
                    <!-- Cursos -->
                    <h5>Cursos Realizados</h5>
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Empresa Certificadora</th>
                                    <th>Nombre del Certificado</th>
                                    <th>Fecha</th>
                                    <th>Acción</th>
                                </tr>
                            </thead>
                            <tbody id="cursosContainer">
                                <tr>
                                    <td><input type="text" class="form-control" name="empresaCertificadora[]" placeholder="Empresa certificadora"></td>
                                    <td><input type="text" class="form-control" name="nombreCertificado[]" placeholder="Nombre del certificado"></td>
                                    <td><input type="date" class="form-control" name="fechaCertificado[]"></td>
                                    <td><button type="button" class="btn btn-danger" onclick="eliminarCurso(this)">Eliminar</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <button type="button" class="btn btn-primary mb-3" onclick="agregarCurso()">Agregar Curso</button>
    
                    <h5>Experiencia Laboral</h5>
                    <div class="mb-3">
                        <label for="nombreEmpresa" class="form-label">Nombre de la empresa:</label>
                        <input type="text" class="form-control" id="nombreEmpresa" name="nombreEmpresa" required>
                    </div>
                    <div class="mb-3">
                        <label for="cargo" class="form-label">Cargo:</label>
                        <input type="text" class="form-control" id="cargo" name="cargo" required>
                    </div>
                    <div class="mb-3">
                        <label for="funciones" class="form-label">Funciones principales:</label>
                        <textarea class="form-control" id="funciones" name="funciones" rows="3" required></textarea>
                    </div>
    
                    <!-- Enviar -->
                    <button type="submit" class="btn btn-primary w-100 mt-4">Enviar</button>
                </form>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Elemento de mensaje cuando no hay resultados
            const noResultsMessage = document.createElement('p');
            noResultsMessage.id = 'noResults';
            noResultsMessage.className = 'text-center text-muted';
            noResultsMessage.style.display = 'none';
            noResultsMessage.textContent = 'No se encontraron puestos disponibles para esta búsqueda.';
            document.getElementById('cursosContainer').appendChild(noResultsMessage);
    
            // Eventos dinámicos para conocimientos
            const conocimientosContainer = document.getElementById('conocimientosContainer');
            document.getElementById('addConocimiento').addEventListener('click', function () {
                const conocimientoField = document.createElement('div');
                conocimientoField.className = 'input-group mb-3';
                conocimientoField.innerHTML = `
                    <input type="text" class="form-control" name="conocimientos[]" placeholder="Ingrese un conocimiento">
                    <button type="button" class="btn btn-danger btn-remove-conocimiento">Eliminar</button>
                `;
                conocimientosContainer.appendChild(conocimientoField);
    
                // Validación en el campo agregado
                const inputField = conocimientoField.querySelector('input');
                validarTextoSinNumeros(inputField);
    
                // Botón para eliminar conocimiento
                conocimientoField.querySelector('.btn-remove-conocimiento').addEventListener('click', function () {
                    conocimientoField.remove();
                });
            });
    
            // Agregar cursos
            document.getElementById('addCurso').addEventListener('click', function () {
                const container = document.getElementById('cursosContainer');
                const nuevaFila = document.createElement('tr');
                nuevaFila.innerHTML = `
                    <td><input type="text" class="form-control" name="empresaCertificadora[]" placeholder="Empresa certificadora"></td>
                    <td><input type="text" class="form-control" name="nombreCertificado[]" placeholder="Nombre del certificado"></td>
                    <td><input type="date" class="form-control" name="fechaCertificado[]"></td>
                    <td><button type="button" class="btn btn-danger" onclick="eliminarCurso(this)">Eliminar</button></td>
                `;
                container.appendChild(nuevaFila);
            });
    
            // Validar edad y teléfono
            document.getElementById('edad').addEventListener('input', function () {
                const edad = this.value;
                const edadMessage = document.getElementById('edadMessage');
                if (edad.length > 2 || edad < 18 || edad > 70) {
                    if (!edadMessage) {
                        const message = document.createElement('div');
                        message.id = 'edadMessage';
                        message.classList.add('text-danger', 'mt-2');
                        message.textContent = 'La edad debe estar entre 18 y 70 años.';
                        this.parentElement.appendChild(message);
                    }
                } else {
                    if (edadMessage) edadMessage.remove();
                }
            });
    
            document.getElementById('telefono').addEventListener('input', function () {
                const telefono = this.value;
                const telefonoMessage = document.getElementById('telefonoMessage');
                if (!/^\d{0,10}$/.test(telefono)) {
                    if (!telefonoMessage) {
                        const message = document.createElement('div');
                        message.id = 'telefonoMessage';
                        message.classList.add('text-danger', 'mt-2');
                        message.textContent = 'El teléfono debe tener 10 dígitos y solo números.';
                        this.parentElement.appendChild(message);
                    }
                } else {
                    if (telefonoMessage) telefonoMessage.remove();
                }
            });
    
            // Validar formulario completo
            document.querySelector('form').addEventListener('submit', function (e) {
                const errores = [];
                const conocimientos = document.querySelectorAll('input[name="conocimientos[]"]');
    
                conocimientos.forEach(input => {
                    if (/\d/.test(input.value)) {
                        errores.push('Los conocimientos no deben contener números.');
                    }
                });
    
                if (errores.length > 0) {
                    e.preventDefault();
                    alert(errores.join('\n'));
                }
            });
        });
    
        // Función para eliminar cursos
        function eliminarCurso(button) {
            button.closest('tr').remove();
        }
    
        // Validación para evitar números en campos de texto
        function validarTextoSinNumeros(input) {
            input.addEventListener('input', () => {
                if (/\d/.test(input.value)) {
                    input.value = input.value.replace(/\d/g, '');
                }
            });
        }
    </script>
    

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>